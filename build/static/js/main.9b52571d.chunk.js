(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(544)},127:function(e,t,a){},130:function(e,t,a){},28:function(e){e.exports={api:{invokeUrl:"https://5bltcq602h.execute-api.us-west-2.amazonaws.com/prod"},cognito:{REGION:"us-east-2",USER_POOL_ID:"us-east-2_U42nLRyVn",APP_CLIENT_ID:"243lj3pf7dj2ubd9idsoqss1m1",IDENTITY_POOL_ID:"us-east-2:a62b5357-7608-4bc8-9671-748194c3e329"},social:{FB:"484177372522431"}}},54:function(e,t){},544:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(110),c=a.n(s),o=(a(126),a(127),a(6)),l=a.n(o),i=a(12),u=a(7),m=a(8),d=a(10),p=a(9),h=a(11),f=a(546),E=a(547),v=a(548),g=(a(130),a(14)),b=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{g.a.signOut(),a.props.auth.setAuthStatus(!1),a.props.auth.setUser(null)}catch(n){console.log(n.message)}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",href:"/"},r.a.createElement("img",{src:"hexal-logo.png",width:"112",height:"28",alt:"hexal logo"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement("a",{href:"/",className:"navbar-item"},"Home"),r.a.createElement("a",{href:"/products",className:"navbar-item"},"Products"),r.a.createElement("a",{href:"/admin",className:"navbar-item"},"Admin")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},this.props.auth.isAuthenticated&&this.props.auth.user&&r.a.createElement("p",null,"Username: ",this.props.auth.user.username),r.a.createElement("div",{className:"buttons"},!this.props.auth.isAuthenticated&&r.a.createElement("div",null,r.a.createElement("a",{href:"/register",className:"button is-primary"},r.a.createElement("strong",null,"Register")),r.a.createElement("a",{href:"/login",className:"button is-light"},"Log in")),this.props.auth.isAuthenticated&&r.a.createElement("a",{href:"/",onClick:this.handleLogOut,className:"button is-primary"},"Log Out"))))))}}]),t}(n.Component);function w(){return r.a.createElement("section",{className:"hero is-primary"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("img",{src:"energy.jpg",alt:"conserve energy"}))))}function N(){return r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"columns features"},r.a.createElement("div",{className:"column is-4"},r.a.createElement("div",{className:"card is-shady"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("h4",null,"Energy conservation"),r.a.createElement("p",null,"Purus semper eget duis at tellus at urna condimentum mattis. Non blandit massa enim nec. Integer enim neque volutpat ac tincidunt vitae semper quis. Accumsan tortor posuere ac ut consequat semper viverra nam."),r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"Learn more")))))),r.a.createElement("div",{className:"column is-4"},r.a.createElement("div",{className:"card is-shady"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("h4",null,"Water conservation"),r.a.createElement("p",null,"Ut venenatis tellus in metus vulputate. Amet consectetur adipiscing elit pellentesque. Sed arcu non odio euismod lacinia at quis risus. Faucibus turpis in eu mi bibendum neque egestas cmonsu songue. Phasellus vestibulum lorem sed risus."),r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"Learn more")))))),r.a.createElement("div",{className:"column is-4"},r.a.createElement("div",{className:"card is-shady"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"content"},r.a.createElement("h4",null,"Solar energy"),r.a.createElement("p",null,"Imperdiet dui accumsan sit amet nulla facilisi morbi. Fusce ut placerat orci nulla pellentesque dignissim enim. Libero id faucibus nisl tincidunt eget nullam. Commodo viverra maecenas accumsan lacus vel facilisis."),r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"Learn more"))))))))}function y(){return r.a.createElement(n.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"box cta"},r.a.createElement("p",{className:"has-text-centered"},r.a.createElement("span",{className:"tag is-primary"},"New")," Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.")),r.a.createElement(N,null))}var O=a(116),k=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isEditMode:!1,updatedproductname:a.props.name},a.handleProductEdit=function(e){e.preventDefault(),a.setState({isEditMode:!0})},a.handleEditSave=function(e){e.preventDefault(),a.setState({isEditMode:!1}),a.props.handleUpdateProduct(a.props.id,a.state.updatedproductname)},a.onAddProductNameChange=function(e){return a.setState({updatedproductname:e.target.value})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tile is-child box notification is-success"},this.props.isAdmin&&r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"/",onClick:this.handleProductEdit,className:"product-edit-icon"},r.a.createElement(O.a,{icon:"edit"})),r.a.createElement("button",{onClick:function(t){return e.props.handleDeleteProduct(e.props.id,t)},className:"delete"})),this.state.isEditMode?r.a.createElement("div",null,r.a.createElement("p",null,"Edit product name"),r.a.createElement("input",{className:"input is-medium",type:"text",placeholder:"Enter name",value:this.state.updatedproductname,onChange:this.onAddProductNameChange}),r.a.createElement("p",{className:"product-id"},"id: ",this.props.id),r.a.createElement("button",{type:"submit",className:"button is-info is-small",onClick:this.handleEditSave},"save")):r.a.createElement("div",null,r.a.createElement("p",{className:"product-title"},this.props.name),r.a.createElement("p",{className:"product-id"},"id: ",this.props.id)))}}]),t}(n.Component),j=a(34),S=a.n(j),I=a(28),C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={newproduct:null,products:[]},a.fetchProducts=Object(i.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat(I.api.invokeUrl,"/products"));case 3:t=e.sent,n=t.data,a.setState({products:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("An error has occurred: ".concat(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),a.componentDidMount=function(){a.fetchProducts()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Energy Products"),r.a.createElement("p",{className:"subtitle is-5"},"Invest in a clean future with our efficient and cost-effective green energy products:"),r.a.createElement("br",null),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-4 is-parent  is-vertical"},this.state.products&&this.state.products.length>0?this.state.products.map(function(e){return r.a.createElement(k,{name:e.productname,id:e.id,key:e.id})}):r.a.createElement("div",{className:"tile notification is-warning"},"No products available"))))))))}}]),t}(n.Component),x=a(21),A=a(41),P=a(28),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={newproduct:{productname:"",id:""},products:[]},a.handleAddProduct=function(){var e=Object(i.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={id:t,productname:a.state.newproduct.productname},e.next=5,S.a.post("".concat(P.api.invokeUrl,"/products/").concat(t),r);case 5:a.setState({products:[].concat(Object(A.a)(a.state.products),[a.state.newproduct])}),a.setState({newproduct:{productname:"",id:""}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("An error has occurred: ".concat(e.t0));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleUpdateProduct=function(){var e=Object(i.a)(l.a.mark(function e(t,n){var r,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={id:t,productname:n},e.next=4,S.a.patch("".concat(P.api.invokeUrl,"/products/").concat(t),r);case 4:s=Object(A.a)(a.state.products).find(function(e){return e.id===t}),c=Object(A.a)(a.state.products).filter(function(e){return e.id!==t}),s.productname=n,c.push(s),a.setState({products:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error updating product: ".concat(e.t0));case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleDeleteProduct=function(){var e=Object(i.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,S.a.delete("".concat(P.api.invokeUrl,"/products/").concat(t));case 4:r=Object(A.a)(a.state.products).filter(function(e){return e.id!==t}),a.setState({products:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Unable to delete product: ".concat(e.t0));case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.fetchProducts=Object(i.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat(P.api.invokeUrl,"/products"));case 3:t=e.sent,n=t.data,a.setState({products:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("An error has occurred: ".concat(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),a.onAddProductNameChange=function(e){return a.setState({newproduct:Object(x.a)({},a.state.newproduct,{productname:e.target.value})})},a.onAddProductIdChange=function(e){return a.setState({newproduct:Object(x.a)({},a.state.newproduct,{id:e.target.value})})},a.componentDidMount=function(){a.fetchProducts()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Product Admin"),r.a.createElement("p",{className:"subtitle is-5"},"Add and remove products using the form below:"),r.a.createElement("br",null),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("form",{onSubmit:function(t){return e.handleAddProduct(e.state.newproduct.id,t)}},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-medium",type:"text",placeholder:"Enter name",value:this.state.newproduct.productname,onChange:this.onAddProductNameChange})),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-medium",type:"text",placeholder:"Enter id",value:this.state.newproduct.id,onChange:this.onAddProductIdChange})),r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary is-medium"},"Add product"))))),r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-4 is-parent  is-vertical"},this.state.products.map(function(t,a){return r.a.createElement(k,{isAdmin:!0,handleUpdateProduct:e.handleUpdateProduct,handleDeleteProduct:e.handleDeleteProduct,name:t.productname,id:t.id,key:t.id})}))))))))}}]),t}(n.Component),B=a(26);var D=function(e){return e.formerrors&&(e.formerrors.blankfield||e.formerrors.passwordmatch)?r.a.createElement("div",{className:"error container help is-danger"},r.a.createElement("div",{className:"row justify-content-center"},e.formerrors.passwordmatch?"Password value does not match confirm password value":""),r.a.createElement("div",{className:"row justify-content-center help is-danger"},e.formerrors.blankfield?"All fields are required":"")):e.apierrors?r.a.createElement("div",{className:"error container help is-danger"},r.a.createElement("div",{className:"row justify-content-center"},e.apierrors)):e.formerrors&&e.formerrors.cognito?r.a.createElement("div",{className:"error container help is-danger"},r.a.createElement("div",{className:"row justify-content-center"},e.formerrors.cognito.message)):r.a.createElement("div",null)};var F=function(e,t){for(var a=document.getElementsByClassName("is-danger"),n=0;n<a.length;n++)a[n].classList.contains("error")||a[n].classList.remove("is-danger");return t.hasOwnProperty("username")&&""===t.username?(document.getElementById("username").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("firstname")&&""===t.firstname?(document.getElementById("firstname").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("lastname")&&""===t.lastname?(document.getElementById("lastname").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("email")&&""===t.email?(document.getElementById("email").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("verificationcode")&&""===t.verificationcode?(document.getElementById("verificationcode").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("password")&&""===t.password?(document.getElementById("password").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("oldpassword")&&""===t.oldpassword?(document.getElementById("oldpassword").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("newpassword")&&""===t.newpassword?(document.getElementById("newpassword").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("confirmpassword")&&""===t.confirmpassword?(document.getElementById("confirmpassword").classList.add("is-danger"),{blankfield:!0}):t.hasOwnProperty("password")&&t.hasOwnProperty("confirmpassword")&&t.password!==t.confirmpassword?(document.getElementById("password").classList.add("is-danger"),document.getElementById("confirmpassword").classList.add("is-danger"),{passwordmatch:!0}):t.hasOwnProperty("newpassword")&&t.hasOwnProperty("confirmpassword")&&t.newpassword!==t.confirmpassword?(document.getElementById("newpassword").classList.add("is-danger"),document.getElementById("confirmpassword").classList.add("is-danger"),{passwordmatch:!0}):void 0},U=a(28),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).signIn=function(){var e=window.FB;e.getLoginStatus(function(t){"connected"===t.status?a.getAWSCredentials(t.authResponse):e.login(function(e){e&&e.authResponse&&a.getAWSCredentials(e.authResponse)},{scope:"public_profile,email"})})},a.signIn=a.signIn,a.state={isLoading:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("FB button is mounted"),this.loadFacebookSDK(),this.createScript(),this.setState({isLoading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadFacebookSDK",value:function(){window.fbAsyncInit=function(){window.FB.init({appId:U.social.FB,autoLogAppEvents:!0,xfbml:!0,version:"v6.0"})},function(e,t,a){var n,r=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk")}},{key:"getAWSCredentials",value:function(e){console.log("Get AWS credentials response: "+e);var t=e.accessToken,a=1e3*e.expiresIn+(new Date).getTime();if(t){var n=window.FB;try{n.api("/me",{fields:"name,email"},function(e){var n={name:e.name,email:e.email};console.log("Access Token: "+t),g.a.federatedSignIn("facebook",{token:t,expires_at:a},n).then(function(e){console.log("User Name: "+n.name),console.log("User Email: "+n.email),console.log(e)})}),this.props.onLogin()}catch(r){console.log(r)}}}},{key:"fbAsyncInit",value:function(){window.FB.init({appId:U.social.FB,cookie:!0,xfbml:!0,version:"v6.0"})}},{key:"initFB",value:function(){window.FB;console.log("FB SDK inited")}},{key:"createScript",value:function(){window.fbAsyncInit=this.fbAsyncInit;var e=document.createElement("script");e.src="https://connect.facebook.net/en_US/sdk.js",e.async=!0,document.body.appendChild(e)}},{key:"handleError",value:function(e){console.log("Error encountered: "+e),alert(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"button","aria-pressed":"false",autoComplete:"off",onClick:this.signIn,disabled:this.state.isLoading},"Login With Facebook")))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",errors:{cognito:null,blankfield:!1}},a.clearErrorState=function(){a.setState({errors:{cognito:null,blankfield:!1}})},a.handleFbLogin=function(){a.props.auth.setAuthStatus(!0),a.props.history.push("/")},a.handleSubmit=function(){var e=Object(i.a)(l.a.mark(function e(t){var n,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.clearErrorState(),(n=F(t,a.state))&&a.setState({errors:Object(x.a)({},a.state.errors,n)}),e.prev=4,e.next=7,g.a.signIn(a.state.username,a.state.password);case 7:r=e.sent,console.log(r),a.props.auth.setAuthStatus(!0),a.props.auth.setUser(r),a.props.history.push("/"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),s=null,s=e.t0.message?e.t0:{message:e.t0},a.setState({errors:Object(x.a)({},a.state.errors,{cognito:s})});case 19:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState(Object(B.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("is-danger")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Log in"),r.a.createElement("hr",null),r.a.createElement(_,{onLogin:this.handleFbLogin}),r.a.createElement("hr",null),r.a.createElement(D,{formerrors:this.state.errors}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",type:"text",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username or email",value:this.state.username,onChange:this.onInputChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"password",placeholder:"Password",value:this.state.password,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("a",{href:"/forgotpassword"},"Forgot password?"))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-success"},"Login"))))))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",confirmpassword:"",errors:{cognito:null,blankfield:!1,passwordmatch:!1}},a.clearErrorState=function(){a.setState({errors:{cognito:null,blankfield:!1,passwordmatch:!1}})},a.handleSubmit=function(){var e=Object(i.a)(l.a.mark(function e(t){var n,r,s,c,o,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.clearErrorState(),(n=F(t,a.state))&&a.setState({errors:Object(x.a)({},a.state.errors,n)}),r=a.state,s=r.username,c=r.email,o=r.password,e.prev=5,e.next=8,g.a.signUp({username:s,password:o,attributes:{email:c}});case 8:i=e.sent,console.log(i),a.props.history.push("/welcome"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),u=null,u=e.t0.message?e.t0:{message:e.t0},a.setState({errors:Object(x.a)({},a.state.errors,{cognito:u})});case 18:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState(Object(B.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("is-danger")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Register"),r.a.createElement(D,{formerrors:this.state.errors}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",type:"text",id:"username","aria-describedby":"userNameHelp",placeholder:"Enter username",value:this.state.username,onChange:this.onInputChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"password",placeholder:"Password",value:this.state.password,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"confirmpassword",placeholder:"Confirm password",value:this.state.confirmpassword,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("a",{href:"/forgotpassword"},"Forgot password?"))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-success"},"Register"))))))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",errors:{cognito:null,blankfield:!1}},a.clearErrorState=function(){a.setState({errors:{cognito:null,blankfield:!1}})},a.forgotPasswordHandler=function(){var e=Object(i.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.clearErrorState(),(n=F(t,a.state))&&a.setState({errors:Object(x.a)({},a.state.errors,n)}),e.prev=4,e.next=7,g.a.forgotPassword(a.state.email);case 7:a.props.history.push("/forgotpasswordverification"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState(Object(B.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("is-danger")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Forgot your password?"),r.a.createElement("p",null,"Please enter the email address associated with your account and we'll email you a password reset link."),r.a.createElement(D,{formerrors:this.state.errors}),r.a.createElement("form",{onSubmit:this.forgotPasswordHandler},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{type:"email",className:"input",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("a",{href:"/forgotpassword"},"Forgot password?"))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-success"},"Submit"))))))}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={verificationcode:"",email:"",newpassword:"",errors:{cognito:null,blankfield:!1}},a.clearErrorState=function(){a.setState({errors:{cognito:null,blankfield:!1}})},a.passwordVerificationHandler=function(){var e=Object(i.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.clearErrorState(),(n=F(t,a.state))&&a.setState({errors:Object(x.a)({},a.state.errors,n)}),e.prev=4,e.next=7,g.a.forgotPasswordSubmit(a.state.email,a.state.verificationcode,a.state.newpassword);case 7:a.props.history.push("/changepasswordconfirmation"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState(Object(B.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("is-danger")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Set new password"),r.a.createElement("p",null,"Please enter the verification code sent to your email address below, your email address and a new password."),r.a.createElement(D,{formerrors:this.state.errors}),r.a.createElement("form",{onSubmit:this.passwordVerificationHandler},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{type:"text",className:"input",id:"verificationcode","aria-describedby":"verificationCodeHelp",placeholder:"Enter verification code",value:this.state.verificationcode,onChange:this.onInputChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{type:"password",className:"input",id:"newpassword",placeholder:"New password",value:this.state.newpassword,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-success"},"Submit"))))))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={oldpassword:"",newpassword:"",confirmpassword:"",errors:{cognito:null,blankfield:!1,passwordmatch:!1}},a.clearErrorState=function(){a.setState({errors:{cognito:null,blankfield:!1,passwordmatch:!1}})},a.handleSubmit=function(){var e=Object(i.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.clearErrorState(),(n=F(t,a.state))&&a.setState({errors:Object(x.a)({},a.state.errors,n)}),e.prev=4,e.next=7,g.a.currentAuthenticatedUser();case 7:return r=e.sent,console.log(r),e.next=11,g.a.changePassword(r,a.state.oldpassword,a.state.newpassword);case 11:a.props.history.push("/changepasswordconfirmation"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState(Object(B.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("is-danger")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Change Password"),r.a.createElement(D,{formerrors:this.state.errors}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"oldpassword",placeholder:"Old password",value:this.state.oldpassword,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"newpassword",placeholder:"New password",value:this.state.newpassword,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",id:"confirmpassword",placeholder:"Confirm password",value:this.state.confirmpassword,onChange:this.onInputChange}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("a",{href:"/forgotpassword"},"Forgot password?"))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-success"},"Change password"))))))}}]),t}(n.Component),W=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Change Password"),r.a.createElement("p",null,"Your password has been successfully updated!")))}}]),t}(n.Component);function K(){return r.a.createElement("section",{className:"section auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Welcome!"),r.a.createElement("p",null,"You have successfully registered a new account."),r.a.createElement("p",null,"Please check your email for a verification link.")))}function Y(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,"Me3 2020. The source code is licensed MIT. The website content is licensed CC BY NC SA 4.0.")))}var G=a(40),V=a(117);G.b.add(V.a),g.b.configure({Auth:{domain:"me3.auth.us-east-2.amazoncognito.com/",redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responsetype:"token"}});var z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthenticated:!1,isAuthenticating:!0,user:null},a.setAuthStatus=function(e){a.setState({isAuthenticated:e})},a.setUser=function(e){a.setState({user:e})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadFacebookSDK(),e.prev=1,e.next=4,g.a.currentSession();case 4:return t=e.sent,this.setAuthStatus(!0),console.log(t),e.next=9,g.a.currentAuthenticatedUser();case 9:a=e.sent,this.setUser(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:this.setState({isAuthenticating:!1});case 17:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadFacebookSDK",value:function(){window.fbAsyncInit=function(){window.FB.init({appId:U.social.FB,autoLogAppEvents:!0,xfbml:!0,version:"v6.0"})},function(e,t,a){var n,r=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk")}},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,user:this.state.user,setAuthStatus:this.setAuthStatus,setUser:this.setUser};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(b,{auth:e}),r.a.createElement(E.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(y,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/products",render:function(t){return r.a.createElement(C,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/admin",render:function(t){return r.a.createElement(L,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(T,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/register",render:function(t){return r.a.createElement(q,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/forgotpassword",render:function(t){return r.a.createElement(H,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/forgotpasswordverification",render:function(t){return r.a.createElement(R,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/changepassword",render:function(t){return r.a.createElement(M,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/changepasswordconfirmation",render:function(t){return r.a.createElement(W,Object.assign({},t,{auth:e}))}}),r.a.createElement(v.a,{exact:!0,path:"/welcome",render:function(t){return r.a.createElement(K,Object.assign({},t,{auth:e}))}})),r.a.createElement(Y,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(543);g.b.configure({Auth:{mandatorySignIn:!0,region:U.cognito.REGION,userPoolId:U.cognito.USER_POOL_ID,userPoolWebClientId:U.cognito.APP_CLIENT_ID,identityPoolId:U.cognito.IDENTITY_POOL_ID}}),c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,1,2]]]);
//# sourceMappingURL=main.9b52571d.chunk.js.map